let pf_data = [
	{
		link: "img/detail/design/visual_detail01.png",
		click: "",
		title: "Animal Mask",
		sub_text:
			"Animal Mask 제품 상세페이지 기획 및 디자인<br>Design / Photoshop / Illustrator",
		result: "img/thumb/design/design_thumb01.png",
		duration: "2015.12",
		category: "Design",
		percent: "100",
	},

	{
		link: "img/detail/design/visual_detail03.jpg",
		click: "",
		title: "Deep Pore Clean 클렌징",
		sub_text:
			"소셜 업로드용 상세페이지 기획 및 디자인<br>Design / Photoshop / Illustrator",
		result: "img/thumb/design/design_thumb02.png",
		duration: "2015.08",
		category: "Design",
		percent: "100",
	},

	{
		link: "img/detail/design/visual_detail04.jpg",
		click: "",
		title: "Deep Pore Clean",
		sub_text:
			"클렌징 세트 제품 상세페이지 기획 및 디자인<br>Design / Photoshop / Illustrator",
		result: "img/thumb/design/design_thumb03.png",
		duration: "2015.08",
		category: "Design",
		percent: "100",
	},

	{
		link: "img/detail/design/visual_detail05.jpg",
		click: "",
		title: "인트로 디자인",
		sub_text:
			"소셜커머스 인트로 상세페이지 기획 및 디자인<br>Design / Photoshop / Illustrator",
		result: "img/thumb/design/design_thumb04.png",
		duration: "2015.09",
		category: "Design",
		percent: "100",
	},

	{
		link: "img/detail/design/visual_detail07.jpg",
		click: "",
		title: "리얼쿠션파운데이션",
		sub_text:
			"제품 상세페이지 기획 및 디자인<br>Design / Photoshop / Illustrator",
		result: "img/thumb/design/design_thumb05.png",
		duration: "2016.02",
		category: "Design",
		percent: "100",
	},

	{
		link: "img/detail/design/visual_detail17.png",
		click: "",
		title: "덤인",
		sub_text:
			"브랜드 소개페이지 디자인<br>Design / Photoshop / Illustrator",
		result: "img/thumb/design/design_thumb06.png",
		duration: "2018.01",
		category: "Design",
		percent: "100",
	},

	{
		link: "img/detail/design/visual_detail18.png",
		click: "",
		title: "티쿱스토어",
		sub_text:
			"브랜드 소개페이지 디자인<br>Design / Photoshop / Illustrator",
		result: "img/thumb/design/design_thumb07.png",
		duration: "2018.02",
		category: "Design",
		percent: "100",
	},

	{
		link: "img/detail/design/visual_detail19.png",
		click: "",
		title: "마음상담센터",
		sub_text:
			"브랜드 소개페이지 디자인<br>Design / Photoshop / Illustrator",
		result: "img/thumb/design/design_thumb08.png",
		duration: "2018.02",
		category: "Design",
		percent: "100",
	},

	{
		link: "link/01/index.html",
		click: "",
		title: "BOOKINGZONE",
		sub_text:
			"골프예약 홈페이지 구축<br>UI·UX기획 / UI 디자인 / 퍼블리싱 / HTML5 / CSS3 / JS",
		result: "img/thumb/web/web_thumb01.png",
		duration: "2017.06",
		category: "Web",
		percent: "100",
	},

	{
		link: "link/02/index.html",
		click: "",
		title: "떡담",
		sub_text:
			"떡브랜드 홈페이지 리뉴얼<br>퍼블리싱 / HTML5 / CSS3 / JS",
		result: "img/thumb/web/web_thumb02.png",
		duration: "2017.06",
		category: "Web",
		percent: "35",
	},

	{
		link: "link/03/index.html",
		click: "",
		title: "e복지",
		sub_text:
			"폐쇄 복지 쇼핑몰 홈페이지 리뉴얼<br>UI 디자인 / 퍼블리싱 / HTML5 / CSS3 / JS",
		result: "img/thumb/web/web_thumb03.png",
		duration: "2017.08 ~ 2017.10",
		category: "Web",
		percent: "40",
	},

	{
		link: "link/06/index.html",
		click: "",
		title: "한국기업복지 지도사협회",
		sub_text:
			"기업복지협회 홈페이지 구축<br>UI 디자인 / 퍼블리싱 / HTML5 / CSS3 / JS",
		result: "img/thumb/web/web_thumb04.png",
		duration: "2017.12 ~ 2018.01",
		category: "Web",
		percent: "50",
	},

	{
		link: "img/detail/mobile/01.png",
		click: "",
		title: "e복지 Android",
		sub_text:
			"사내복지 APP 리뉴얼 UI 디자인<br>UI·UX기획 / UI 디자인",
		result: "img/thumb/mobile/app_thumb01.png",
		duration: "2017.09 ~ 2017.10",
		category: "Mobile",
		percent: "50",
	},

	{
		link: "img/detail/mobile/02.png",
		click: "",
		title: "모두다 Android",
		sub_text:
			"주변맛집 예약 APP UI 디자인<br>UI·UX기획 / UI 디자인",
		result: "img/thumb/mobile/app_thumb02.png",
		duration: "2017.11",
		category: "Mobile",
		percent: "80",
	},

	{
		link: "link/05/index.html",
		click: "",
		title: "광주제2순환도로 구축",
		sub_text:
			"광주 고속도로 홈페이지 구축<br>UI·UX기획 / UI 디자인 / 퍼블리싱 / HTML5 / CSS3 / JS",
		result: "img/thumb/web/web_thumb05.png",
		duration: "2017.10 ~ 2018.03",
		category: "Web",
		percent: "100",
	},

	{
		link: "img/detail/mobile/03.png",
		click: "",
		title: "e복지 관리자 Android",
		sub_text: "사내복지 관리자 전용 APP UI 디자인<br>UI·UX기획 / UI 디자인",
		result: "img/thumb/mobile/app_thumb03.png",
		duration: "2018.04",
		category: "Mobile",
		percent: "50",
	},

	{
		link: "img/detail/mobile/05.png",
		click: "",
		title: "오라이 Manager Android",
		sub_text:
			"화물차 배정(매칭) 매니저 전용 APP UI 디자인<br>UI·UX기획 / UI 디자인",
		result: "img/thumb/mobile/app_thumb05.png",
		duration: "2018.07",
		category: "Mobile",
		percent: "100",
	},

	{
		link: "link/04/index.html",
		click: "",
		title: "한국기업복지",
		sub_text: "기업복지 소개 홈페이지 구축<br>퍼블리싱 / HTML5 / CSS3 / JS",
		result: "img/thumb/web/web_thumb06.png",
		duration: "2018.07 ~ 2018.08",
		category: "Web",
		percent: "40",
	},

	{
		link: "img/detail/mobile/06.png",
		click: "",
		title: "오라이 B2C Android",
		sub_text: "화물차 배정(매칭) 사용자 APP UI 디자인<br>UI·UX기획 / UI 디자인",
		result: "img/thumb/mobile/app_thumb06.png",
		duration: "2018.08",
		category: "Mobile",
		percent: "100",
	},
	
	{
		link: "img/detail/mobile/04.png",
		click: "",
		title: "e단비 Android",
		sub_text: "복지포인트 및 고객 관리 APP UI 디자인<br>UI·UX기획 / UI 디자인",
		result: "img/thumb/mobile/app_thumb04.png",
		duration: "2019.08 ~ 2019.09",
		category: "Mobile",
		percent: "50",
	},

	{
		link: "link/07/index.html",
		click: "",
		title: "비피메이커스랩",
		sub_text: "회사 홈페이지 구축<br>퍼블리싱 / HTML5 / CSS3 / JS",
		result: "img/thumb/web/web_thumb07.png",
		duration: "2018.08",
		category: "Web",
		percent: "40",
	},

	{
		link: "link/08/index.html",
		click: "",
		title: "부동산 플랫폼",
		sub_text: "부동산 플랫폼 홈페이지 구축<br>퍼블리싱 / HTML5 / CSS3 / JS",
		result: "img/thumb/web/web_thumb08.png",
		duration: "2018.09",
		category: "Web",
		percent: "100",
	},

	{
		link: "",
		click:
			"window.open('link/09_2/index.html','POTS_Mobile','width=395, height=812, menubar=no, status=no, toolbar=no');",
		title: "중소기업복지지원단 Mobile",
		sub_text:
			"중소기업복지 사업 안내 홈페이지 모바일버전 구축<br>UI·UX기획 / UI 디자인 / 퍼블리싱 / HTML5 / CSS3 / JS",
		result: "img/thumb/mobile/app_thumb07.png",
		duration: "2019.03",
		category: "Mobile",
		percent: "100",
	},

	{
		link: "link/09/index.html",
		click: "",
		title: "중소기업복지지원단",
		sub_text:
			"중소기업복지 사업 안내 홈페이지 구축<br>UI·UX기획 / UI 디자인 / 퍼블리싱 / HTML5 / CSS3 / JS",
		result: "img/thumb/web/web_thumb09.png",
		duration: "2019.02",
		category: "Web",
		percent: "100",
	},

	{
		link: "",
		click:
			"window.open('link/10_2/index.html','POTS_Mobile','width=395, height=812, menubar=no, status=no, toolbar=no');",
		title: "POTS ERP Mobile",
		sub_text:
			"ERP 시스템 모바일버전 구축<br>UI·UX기획 / UI 디자인 / 퍼블리싱 / HTML5 / CSS3 / JS",
		result: "img/thumb/mobile/app_thumb08.png",
		duration: "2019.08 ~ 2019.09",
		category: "Mobile",
		percent: "100",
	},

	{
		link: "link/10/order_list.html",
		click: "",
		title: "POTS ERP",
		sub_text:
			"ERP 시스템 홈페이지 구축<br>UI·UX기획 / UI 디자인 / 퍼블리싱 / HTML5 / CSS3 / JS",
		result: "img/thumb/web/web_thumb10.png",
		duration: "2019.07 ~ 2019.08",
		category: "Web",
		percent: "100",
	},

	{
		link: "link/11/index.html",
		click: "",
		title: "미담건축사무소",
		sub_text:
			"건축사무소 홈페이지 리뉴얼<br>UI·UX기획 / UI 디자인 / 퍼블리싱 / HTML5 / CSS3 / JS",
		result: "img/thumb/web/web_thumb11.png",
		duration: "2020.06 ~ 2020.07",
		category: "Web",
		percent: "100",
	},

	{
		link: "img/detail/develop/1.png",
		click: "",
		title: "하나은행 ATM",
		sub_text: "하나은행 ATM UI 개발 및 리뉴얼<br>운영부(관리자모드) 전체 개발 / 주요5대거래 통합엔진 개발 / HTML5 / CSS3 / JS / XML",
		result: "img/thumb/web/web_thumb12.png",
		duration: "",
		category: "Develop",
		percent: "80",
	},

	{
		link: "img/detail/develop/2.png",
		click: "",
		title: "우리은행 ATM",
		sub_text: "우리은행 ATM UI 개발<br>광고부 통합엔진 개발 / 주요5대거래 통합엔진 개발 /HTML5 / CSS3 / JS / XML",
		result: "img/thumb/web/web_thumb13.png",
		duration: "",
		category: "Develop",
		percent: "80",
	},

	// {
	// 	link: "img/detail/develop/01.png",
	// 	click: "",
	// 	title: "GUI 개발 Tool",
	// 	sub_text: "[10%참여] 비개발자를 위한 GUI tool 개발",
	// 	skill: "HTML5 / CSS3 / JS / XML / AJAX / ACTION-SCRIPT",
	// 	result: "",
	// 	duration: "",
	// 	category: "Develop",
	// },
];

let load = () => {
	setTimeout(function(){
		let removeItem = $('.loading');
		removeItem.fadeOut();
		// 리스트 그려주기
		addList();
	}, 3200);
		

	// weather();
	
	// 카테고리 추가
	addMenu();
	// 오늘 날씨 & 날짜 정보 업데이트
	changeToday();

	// 카테고리 버튼 이벤트
	let allBtn = document.querySelectorAll(".category_btn");
	allBtn.forEach((item) => {
		item.addEventListener("click", changeCate);
	});

	// 마우스 클릭 이펙트 추가
	window.addEventListener("click", drawRipple);

	// typed.js library 사용
	$(function () {
		$(".typing").typed({
			strings: [
			"This is my Playlist<span class='rhythm'>54</span>",
			// "Click Content for more information."
		],
			typeSpeed: 100,
			backSpeed: 50,
			backDelay: 2000,
			showCursor: false,
			loop: true,
		});
	});
};

let drawRipple = function (ev) {
	let mo_item = document.querySelector(".clk_evt");
	let clone_mouse = mo_item.cloneNode(true);

	clone_mouse.classList.add("animate");
	clone_mouse.style.left = ev.clientX - 5 + "px";
	clone_mouse.style.top = ev.clientY - 5 + "px";
	mo_item.parentNode.replaceChild(clone_mouse, mo_item);
};

let loadGraph = () => {
	// 리스트 마우스 이벤트
	let graphItem = document.querySelectorAll(".inner_graph");

	for (let i = 0; i < graphItem.length; i++) {
		let itemPercent = graphItem[i].dataset.percent;
		graphItem[i].style.width = itemPercent+'%';
	}
}

let addList = (thisCate) => {
	let listLength =
		thisCate == undefined ? pf_data : thisCate == "" ? pf_data : thisCate;

	// 리스트 만들기
	let item = ``;

	for (let i = listLength.length - 1; i >= 0; i--) {
		let toLink =
			listLength[i].link == ""
				? `<a href="" onclick="${listLength[i].click}" target="_blank">`
				: `<a href="${listLength[i].link}" target="_blank">`;

			item += `<li class="item" data-js="section">
						${toLink}
							<img src="${listLength[i].result}" alt="thumbnail" class="thumb">
							<div class="item_info">
								<span class="tag">${listLength[i].category}</span>
								<p class="title">${listLength[i].title}</p>
								<p class="sub_txt">${listLength[i].sub_text}</p>
								<div class="graph_wrap">
									<span>참여도</span>
									<div class="graph_line">
										<div class="inner_graph" data-percent="${listLength[i].percent}"></div>
									</div>
									<span class="percent">${listLength[i].percent}%</span>
								</div>
							</div>
						</a>
					</li>`;
	}

	// 컨테이너에 리스트 넣기
	let container = document.querySelector(".item_list");
	container.innerHTML = item;

	return listAnimation() , loadGraph();
};

let listAnimation = () => {
	let items = document.querySelectorAll('.item');

	let doSetTimeout = (i) => {
		let nowItem = items[i];
		setTimeout(function () {
			nowItem.className = 'slideInLeft';
		}, (i + 1) * 200);
	}

	for (let i = 0; i < items.length; ++i)	doSetTimeout(i);
}

let addMenu = () => {
	let menu_item = `<li class="all_btn category_btn active">
						<i class="fa-solid fa-bars"></i>
						<p>All</p>
					</li>
					<li class="code_btn category_btn">
						<i class="fa-solid fa-code"></i>
						<p>Develop</p>
					</li>
					<li class="web_btn category_btn">
						<i class="fa-solid fa-laptop-code"></i>
						<p>Web</p>
					</li>
					<li class="mobile_btn category_btn">
						<i class="fa-solid fa-mobile-screen-button"></i>
						<p>Mobile</p>
					</li>
					<li class="design_btn category_btn">
						<i class="fa-solid fa-vector-square"></i>
						<p>Design</p>
					</li>
					`;

					// <li class="study_btn">
					// 	<a href="https://rowan-risk-1fc.notion.site/My-Study-59b9b5e6e70f4a569e16524b0a0ed9ef" target="_blank">
					// 		<i class="fa-solid fa-pen-to-square"></i>
					// 		<p>Study</p>
					// 	</a>
					// </li>

	let navi = document.querySelector(".menu");
	let sub_btn = document.querySelector(".category");

	return (navi.innerHTML = sub_btn.innerHTML = menu_item);
};

let changeCate = (evt) => {
	evt.preventDefault();

	// 컨테이너 초기화
	let container = document.querySelector(".item_list");
	container.innerHTML = "";

	// 버튼CSS 처리
	let clkItem = document.querySelectorAll(".category_btn");
	let btnNames = evt.currentTarget.children[1].innerHTML;

	for (let i = 0; i < clkItem.length; i++) {
		let same_cate = clkItem[i].children[1].innerHTML;

		if (btnNames === same_cate) {
			// 현재 버튼 CSS 추가
			evt.currentTarget.classList.add("active");
			clkItem[i].classList.add("active");
		} else {
			// 버튼 CSS 초기화
			clkItem[i].classList.remove("active");
		}
	}

	// 누른 카테고리에 맞춰 리스트 바꿔주기
	let cate = ``;
	switch (btnNames) {
		case "Develop":
			cate = "Develop";
			break;
		case "Web":
			cate = "Web";
			break;
		case "Mobile":
			cate = "Mobile";
			break;
		case "Design":
			cate = "Design";
			break;
	}

	let tempCategory = pf_data.filter((evt) => evt.category == cate);

	return addList(tempCategory);
};

let changeToday = () => {
	let date = new Date();
	let year = date.getFullYear();
	let month = date.getMonth();
	let day = date.getDate();

	let yearTxt = document.querySelector(".year");
	let monthTxt = document.querySelector(".month");
	let dayTxt = document.querySelector(".day");

	month += 1;
	month = month <= 9 ? "0" + month : month;
	day = day <= 9 ? "0" + day : day;

	yearTxt.innerHTML = year;
	monthTxt.innerHTML = month;
	dayTxt.innerHTML = day;

	// let temp = 234e25719500c49d65d2a365dd20c16e;
};

let setWeather = (today_weather) => {
	console.log(today_weather);
	let icon_src = ``;
	return icon_src;
}

let weather = () => {
	const weather = document.querySelector(".weather .weather_txt");
	const icons = document.querySelector(".weather .weather_icon");
	const API_KEY = "9d8c6445e8b07d4a9cec0bdad61c024a";

	let icon_src = ``;
	let today_weather = ``;
	let lat = 37.2801536;
	let lng = 127.008768;
	const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lng}&appid=${API_KEY}`;
	console.log(lat , lng)


	let onGeoOk = (position) => {
		// const lat = position.coords.latitude;
		// const lng = position.coords.longitude;

		fetch(url)
			.then((response) => response.json())
			.then((data) => {
				
				switch (data.weather[0].main){
					case "Clouds" : 
					icon_src = `./img/weather/scattered_clouds.png`;
					today_weather = `흐림 & 구름`;
					break;
					case "Snow" : 
					icon_src = `./img/weather/snow.png`;
					today_weather = `눈이 오고 있어요`;
					break;
					case "Clear" : 
					icon_src = `./img/weather/clear.png`;
					today_weather = `매우 맑습니다`;
					break;
					case "Thunderstorm" : 
					icon_src = `./img/weather/thunderstorm.png`;
					today_weather = `천둥번개가 칩니다`;
					break;
					case "Drizzle" : 
					icon_src = `./img/weather/scattered_clouds.png`;
					today_weather = `구름이 많습니다`;
					break;
					case "Rain" : 
					icon_src = `./img/weather/rain.png`;
					today_weather = `비가 옵니다`;
					break;
					case "Atmosphere" : 
					icon_src = `./img/weather/mist.png`;
					today_weather = `흐림 & 안개`;
					break;
				}

				weather.innerText = today_weather;
				icons.src = icon_src;
			});
	}

	let onGeoError = () => {
		console.log("날씨 정보를 가져오지 못했습니다.");
		weather.innerText = "맑음";
		icons.src = "./img/weather/clear.png";
	}
	navigator.geolocation.getCurrentPosition(onGeoOk, onGeoError);
}

